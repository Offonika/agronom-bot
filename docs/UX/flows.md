# UX Flows ‚Äî Plan Memory & Auto-Planning

–í–µ—Ä—Å–∏—è: 0.1 (13.11.2025)

## 1. –î–∏–∞–≥–Ω–æ–∑ ‚Üí –≤—ã–±–æ—Ä –æ–±—ä–µ–∫—Ç–∞ ‚Üí –ø–ª–∞–Ω

1. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –¥–∏–∞–≥–Ω–æ–∑–∞ (–±–ª–æ–∫–∏ ¬´üì∏ –î–∏–∞–≥–Ω–æ–∑¬ª, ¬´üß™ –ü–æ—á–µ–º—É —Ç–∞–∫¬ª, ¬´üß¥ –ß—Ç–æ –¥–µ–ª–∞—Ç—å¬ª, ¬´‚è∞ –ß—Ç–æ –¥–∞–ª—å—à–µ¬ª) –∏ –∫–Ω–æ–ø–∫–∏.
2. –ü–æ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π ‚Äî –∏–Ω–ª–∞–π–Ω-—Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`üçÖ –ì—Ä—è–¥–∫–∞ ‚Ññ2`, `üçÜ –ì—Ä—è–¥–∫–∞ ‚Ññ3`, `+ –î–æ–±–∞–≤–∏—Ç—å`). –¢–∞–ø –ø–æ –æ–±—ä–µ–∫—Ç—É –¥–µ–ª–∞–µ—Ç –µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã–º –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç `object_id` –≤ –ø–ª–∞–Ω.
3. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ —ç—Ç–∞–ø–æ–≤:
   - –ö–æ–ª–æ–Ω–∫–∏: ¬´–≠—Ç–∞–ø¬ª, ¬´–í–∞—Ä–∏–∞–Ω—Ç—ã¬ª, ¬´PHI¬ª, ¬´–ó–∞–º–µ—Ç–∫–∏¬ª.
   - –î–æ —Ç—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞ —ç—Ç–∞–ø, –∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–º–µ—á–µ–Ω —á–µ–∫–º–∞—Ä–∫–æ–º.
   - –ö–Ω–æ–ø–∫–∏ ¬´–í—ã–±—Ä–∞—Ç—å¬ª, ¬´–£—Ç–æ—á–Ω–∏—Ç—å –ø—Ä–µ–ø–∞—Ä–∞—Ç¬ª, ¬´–ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏¬ª.
4. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ª—é–±–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è CTA ¬´–ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è¬ª ‚Üí –≤–æ—Ä–∫–µ—Ä —Å–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏—è (–æ–±—Ä–∞–±–æ—Ç–∫–∞, PHI, –¥–æ–∂–¥—å >‚ÄØX‚ÄØ–º–º).
5. –ß–µ—Ä–Ω–æ–≤–∏–∫ –ø–ª–∞–Ω–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `proposed`; –ø—Ä–∏–Ω—è—Ç–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –µ–≥–æ –≤ `accepted`. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –±–∞–Ω–Ω–µ—Ä ¬´–ü–ª–∞–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω –¥–ª—è üçá –ï–∂–µ–≤–∏–∫–∞ ‚Äî –û—Å–µ–Ω–Ω–µ–µ —Å—Ç–∞—Ä–µ–Ω–∏–µ¬ª.

## 2. –ö–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ–ø–ª–∞–Ω–∞

- –ê–≤—Ç–æ–ø–ª–∞–Ω–µ—Ä –ø–æ–¥–±–∏—Ä–∞–µ—Ç –∑–µ–ª—ë–Ω–æ–µ –æ–∫–Ω–æ –≤ —Ñ–æ–Ω–µ (–≤–æ—Ä–∫–µ—Ä + Open‚ÄëMeteo) –∏, –∫–æ–≥–¥–∞ —Å–ª–æ—Ç –Ω–∞–π–¥–µ–Ω, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –≤ —á–∞—Ç–µ.
- –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:
  - –¢–µ–∫—Å—Ç `–®–∞–≥ 3/3. –ü—Ä–µ–¥–ª–∞–≥–∞—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–ª—è üçá –ï–∂–µ–≤–∏–∫–∞ ‚Äî –õ–∏—Å—Ç–æ–≤–∞—è –ø–æ–¥–∫–æ—Ä–º–∫–∞.` (—É—Ç–æ—á–Ω—è–µ—Ç –æ–±—ä–µ–∫—Ç –∏ —ç—Ç–∞–ø).
  - –°—Ç—Ä–æ–∫–∞ `üóì 12 –Ω–æ—è–±—Ä—è, 19:00‚Äì20:00`.
  - –ë–ª–æ–∫ ¬´–ü–æ—á–µ–º—É —ç—Ç–æ –æ–∫–Ω–æ¬ª —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ (`‚Ä¢ –±–µ–∑ –¥–æ–∂–¥—è 12 —á`, `‚Ä¢ –≤–µ—Ç–µ—Ä –¥–æ 4 –º/—Å`, `‚Ä¢ +14‚Ä¶+16 ¬∞C`).
  - –ö–Ω–æ–ø–∫–∏: `[–ü—Ä–∏–Ω—è—Ç—å]` `[–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è]` `[–û—Ç–º–µ–Ω–∏—Ç—å]`.
- –î–µ–π—Å—Ç–≤–∏—è:
  - **–ü—Ä–∏–Ω—è—Ç—å** ‚Äî —Å–æ–∑–¥–∞—ë—Ç —Å–æ–±—ã—Ç–∏—è `treatment/phi`, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –ø–ª–∞–Ω –≤ `scheduled`. –ë–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç: ¬´–ì–æ—Ç–æ–≤–æ! –ù–∞–ø–æ–º–Ω—é –≤–æ –≤—Ç–æ—Ä–Ω–∏–∫ –≤ 18:00¬ª.
  - **–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è** ‚Äî –ø–æ–º–µ—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —Å–ª–æ—Ç `rejected`, —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π `autoplan_run` –∏ –∑–∞–Ω–æ–≤–æ —Å—Ç–∞–≤–∏—Ç –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç ¬´–ò—â—É –¥—Ä—É–≥–æ–µ –æ–∫–Ω–æ ‚Äî –ø—Ä–∏—à–ª—é –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É‚Ä¶¬ª.
  - **–û—Ç–º–µ–Ω–∏—Ç—å** ‚Äî —Å–ª–æ—Ç —É—Ö–æ–¥–∏—Ç –≤ `cancelled`, –ø–ª–∞–Ω –æ—Å—Ç–∞—ë—Ç—Å—è –≤ `accepted`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–æ–∫–æ–π–Ω—ã–π –æ—Ç–≤–µ—Ç ¬´–û–∫, –æ—Ç–º–µ–Ω–∏–ª —ç—Ç–æ—Ç —Å–ª–æ—Ç¬ª.
- –ï—Å–ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –æ–∫–æ–Ω –Ω–µ—Ç, –≤–æ—Ä–∫–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç fallback `plan_autoplan_none` (¬´–ü–æ–∫–∞ –Ω–µ—Ç –∑–µ–ª—ë–Ω—ã—Ö –æ–∫–æ–Ω‚Ä¶¬ª) –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫—É ¬´–ü–æ–¥–æ–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –≤—Ä—É—á–Ω—É—é¬ª (callback `plan_manual_start|plan|stage|option`).
- –ï—Å–ª–∏ –∞–≤—Ç–æ–ø–ª–∞–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–Ω–µ—Ç –æ—á–µ—Ä–µ–¥–∏, –≤–æ—Ä–∫–µ—Ä –æ—Ç–∫–ª—é—á–∏–ª—Å—è), `plan_pick` —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞—ë—Ç fallback-—Å–ª–æ—Ç: —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–®–∞–≥ 3/3‚Ä¶¬ª + –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ (¬´–ê–≤—Ç–æ–ø–ª–∞–Ω–µ—Ä —Å–µ–π—á–∞—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω‚Ä¶¬ª) –∏ —Ç–µ –∂–µ –∫–Ω–æ–ø–∫–∏ `[–ü—Ä–∏–Ω—è—Ç—å] / [–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è] / [–û—Ç–º–µ–Ω–∏—Ç—å]`. –®–∞–≥ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (`stageId`, `stageOptionId`) –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `plan_sessions`, –ø–æ—ç—Ç–æ–º—É `/plan_treatment` –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É.
- –†—É—á–Ω–æ–π –º–∞—Å—Ç–µ—Ä (–±—ã—Å—Ç—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ ¬´–°–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º¬ª, ¬´–ó–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º¬ª, ¬´–í—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É¬ª) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ –∫–Ω–æ–ø–∫–µ ¬´–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è¬ª –∏–ª–∏ fallback-–∫–Ω–æ–ø–∫–µ ¬´–ü–æ–¥–æ–±—Ä–∞—Ç—å –≤—Ä–µ–º—è –≤—Ä—É—á–Ω—É—é¬ª. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–ª–æ—Ç –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ `time_scheduled`, –∞ —Å–µ—Å—Å–∏—è –æ—á–∏—â–∞–µ—Ç—Å—è.

## 3. –ö–æ–º–∞–Ω–¥—ã –∏ –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è

- `/objects` ‚Äî —Å–ø–∏—Å–æ–∫ –≥—Ä—è–¥–æ–∫/—Ä–∞—Å—Ç–µ–Ω–∏–π, –∫–Ω–æ–ø–∫–∞ ¬´–°–¥–µ–ª–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–º¬ª.
- `/use <object_name>` ‚Äî —Å–º–µ–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –∫–Ω–æ–ø–æ–∫.
- `/plans` ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç—ã–µ –ø–ª–∞–Ω—ã —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏ (accepted/scheduled/awaiting_window).
- `/done <event_id>` ‚Äî –ø–æ–º–µ—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ.
- `/skip <event_id>` ‚Äî –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ (–¥–ª—è –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –∞–≤—Ç–æ–ø–ª–∞–Ω–∞).
- `/history` ‚Äî –ø—Ä–µ–∂–Ω–∏–π —Å–ø–∏—Å–æ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è, –Ω–æ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç—Å—è –ø–æ –∞–∫—Ç–∏–≤–Ω–æ–º—É –æ–±—ä–µ–∫—Ç—É.
- –ö–Ω–æ–ø–∫–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö: ¬´–ü—Ä–∏–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è¬ª, ¬´–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å¬ª, ¬´–ü—Ä–∏–Ω—è—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ¬ª (–ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ PLAN_UPDATE).

## 4. Follow-ups –∏ –∫–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥

- –¢–∞–±–ª–∏—Ü–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:
  - `["–µ—â—ë", "–≤–æ–ø—Ä–æ—Å", "—á—Ç–æ –¥–∞–ª—å—à–µ"]` ‚Üí –±–ª–æ–∫ ¬´–ì–æ—Ç–æ–≤ –ø–æ–¥—Å–∫–∞–∑–∞—Ç—å –ø–æ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –æ–±—Ä–∞–±–æ—Ç–∫–∞–º –∏–ª–∏ —Ñ–æ—Ç–æ –¥–æ/–ø–æ—Å–ª–µ¬ª.
  - `["–ø–æ–≥–æ–¥–∞", "–¥–æ–∂–¥—å", "–≤–µ—Ç–µ—Ä"]` ‚Üí –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –∑–µ–ª—ë–Ω—ã–µ –æ–∫–Ω–∞.
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç, –∫–æ–≥–¥–∞ –∫–ª—é—á–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:
  > ¬´–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ —ç—Ç–æ–º—É –¥–∏–∞–≥–Ω–æ–∑—É ‚Äî –Ω–∞–∂–º–∏ ‚Äú–ü–ª–∞–Ω—ã‚Äù –∏–ª–∏ ‚Äú–ó–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞–Ω –≤—Ä—É—á–Ω—É—é‚Äù. –í–æ—Ç FAQ –ø–æ —á–∞—Å—Ç—ã–º –≤–æ–ø—Ä–æ—Å–∞–º.¬ª
  –≠—Ç–æ—Ç –±–ª–æ–∫ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–≤–æ–π —Ä–µ–ø–ª–∏–∫–æ–π –¥–≤–∞ —Ä–∞–∑–∞ –ø–æ–¥—Ä—è–¥; –±–æ—Ç —Ö—Ä–∞–Ω–∏—Ç `last_followup_kind`.
- –ü–æ—è—Å–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Å–ª–æ—Ç–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∏–Ω–∏–º—É–º –¥–≤–∞ —Ñ–∞–∫—Ç–∞ (`reason[]`) –∏ —ç–º–æ–¥–∑–∏ —Å –ø–æ–≥–æ–¥–æ–π üå§Ô∏èüåßÔ∏è, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–≤–µ—Ä—è–ª –∞–≤—Ç–æ–º–∞—Ç–∏–∫–µ.

## 5. –û—à–∏–±–∫–∏ –∏ fallback

- –ü—Ä–∏ `needs_review` (–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–µ–ø–∞—Ä–∞—Ç) –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–∞–Ω–Ω–µ—Ä ¬´–≠—Ç–æ—Ç –ø—Ä–µ–ø–∞—Ä–∞—Ç –Ω–µ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–Ω–∞–ª–æ–≥¬ª.
- –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∏–ª –æ–±—ä–µ–∫—Ç, –ø–æ–∫–∞ –æ—Ç–∫—Ä—ã—Ç –ø–ª–∞–Ω, UI —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: ¬´–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ üçÖ –ì—Ä—è–¥–∫–∞ ‚Ññ2 –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∑–∞ üçá –ï–∂–µ–≤–∏–∫–∞?¬ª —Å –¥–≤—É–º—è –∫–Ω–æ–ø–∫–∞–º–∏.
- –í–æ –≤—Ä–µ–º—è —Ä–µ—Å—Ç–∞—Ä—Ç–æ–≤ –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ /start) –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ –ë–î –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–ø–∏—Å–∫–æ–º ¬´–°–µ–≥–æ–¥–Ω—è –≤ –ø–ª–∞–Ω–µ¬ª.
