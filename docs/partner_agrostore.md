# Partner Integration Brief ‚Äì AgroStore √ó ¬´–ö–∞—Ä–º–∞–Ω–Ω—ã–π‚ÄØ–∞–≥—Ä–æ–Ω–æ–º¬ª

–í–µ—Ä—Å–∏—è‚ÄØ1.1 ‚Äî 20‚ÄØ–∏—é–ª—è‚ÄØ2025‚ÄØ–≥.  
(v1.0‚ÄØ‚Üí‚ÄØv1.1: —É—Ç–æ—á–Ω—ë–Ω Order Webhook, —Å—Å—ã–ª–∫–∏ –Ω–∞ OpenAPI, QA‚Äëtests)

---

## ¬ß4 Order Webhook

–ë–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∑–∞–∫–∞–∑–µ –ø—Ä–µ–ø–∞—Ä–∞—Ç–∞ —á–µ—Ä–µ–∑ HTTPS‚Äë–≤–µ–±—Ö—É–∫:

**POST `/v1/partner/orders`**  
(—Å—Ö–µ–º–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ OpenAPI v1.2 ‚Üí `openapi.yaml`, —Ä–∞–∑–¥–µ–ª `paths`)

| HTTP | –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ                    | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                                 |
|------|-----|-----------------------------|---------------------------------------------|
| POST | 202 | Queued                      | –ó–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞         |
| POST | 400 | Bad request                 | JSON‚Äëschema error / missing fields          |
| POST | 401 | Unauthorized                | –ù–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å HMAC‚ÄëSHA256                |

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**  
Header `X‚ÄëSign` (HMAC‚ÄëSHA256) –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ —Å—ã—Ä–æ–º—É —Ç–µ–ª—É –∑–∞–ø—Ä–æ—Å–∞.
–°–µ–∫—Ä–µ—Ç –≤—ã–¥–∞—ë—Ç—Å—è –ø–∞—Ä—Ç–Ω—ë—Ä—É –æ—Ç–¥–µ–ª—å–Ω–æ –∏ —Ä–æ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 90‚ÄØ–¥–Ω–µ–π.
–¢–µ–ª–æ –Ω—É–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `json.dumps(payload, separators=(",", ":"), sort_keys=True)`
–ø–µ—Ä–µ–¥ —Ä–∞—Å—á—ë—Ç–æ–º –ø–æ–¥–ø–∏—Å–∏, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

### 4.1 Payload schema (excerpt)


{
  "order_id": "string",
  "user_tg_id": 123456789,
  "protocol_id": 42,
  "price_kopeks": 15900,
  "signature": "hex"
}
4.2 Error examples
400 Bad request:


{ "code": "BAD_REQUEST", "message": "price_kopeks must be >0" }
401 Unauthorized:



{ "code": "UNAUTHORIZED", "message": "Invalid signature" }
¬ß5 QA & Monitoring
–¢–µ—Å—Ç‚Äë–∫–µ–π—Å TC‚Äë028 –¥–æ–±–∞–≤–ª–µ–Ω –≤ QA Test Plan v1.1 (–ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ)

TC‚Äë029 ‚Äî –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π (–Ω–µ–≤–µ—Ä–Ω–∞—è –ø–æ–¥–ø–∏—Å—å)

–ú–µ—Ç—Ä–∏–∫–∞ –≤ Prometheus:


partner_orders_total{status="fail"}
–ê–ª–µ—Ä—Ç: P2 >‚ÄØ5‚ÄØ–æ—à–∏–±–æ–∫ / 5‚ÄØ–º–∏–Ω

¬ß6 Deep‚Äëlink Schema (v1)
text

https://agrostore.ru/agronom?
  pid={product_id}&
  src=bot&
  uid={sha256(tg_id)}&
  dis=5&
  utm_campaign=agrobot
–ü—Ä–∏–º–µ—Ä:

https://agrostore.ru/agronom?pid=12345&src=bot&uid=07ab...ef&dis=5&utm_campaign=agrobot
–ü–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫—É–ø–æ–Ω AGRO5 –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

¬ß7 SLA
–ü–∞—Ä—Ç–Ω—ë—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç health‚Äëendpoint:

GET /status ‚Üí 200 OK
{
  "status": "up"
}
¬ß8 –û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å
Daily CSV: agro_orders_YYYYMMDD.csv
–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ S3: agro-report/

–ö–æ–ª–æ–Ω–∫–∏:

provider_id

tg_hash

amount_rub

discount_rub

status

created_at

–°–≤–µ—Ä–∫–∞ –∫–æ–º–∏—Å—Å–∏–π ‚Äî 3‚Äë–≥–æ —á–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞

¬ß9 –¢–∞–π–º–ª–∞–π–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É—Ç–æ—á–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–æ–µ–∫—Ç–µ)

¬ß10 KPIs
‚â•‚ÄØ50 –ø–µ—Ä–µ—Ö–æ–¥–æ–≤/–¥–µ–Ω—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞

–ö–æ–Ω–≤–µ—Ä—Å–∏—è click ‚Üí paid ‚â•‚ÄØ10‚ÄØ%

–ö–æ–º–∏—Å—Å–∏—è ‚â•‚ÄØ‚ÇΩ30‚ÄØ000 –∑–∞ 30 –¥–Ω–µ–π

¬ß11 –ö–æ–Ω—Ç–∞–∫—Ç—ã
–ü–∞—Ä—Ç–Ω—ë—Ä: –ê–≥—Ä–æStore.ru
–¢–∏–ø: e‚Äëcommerce –°–ó–†, —Å–µ–º–µ–Ω–∞, —É–¥–æ–±—Ä–µ–Ω–∏—è

–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ:
–ò–≤–∞–Ω –ì—Ä–æ–º–æ–≤, Partner Manager
üìß i.gromov@agrostore.ru
üì± @gromov_agro
üìû +7 926 123‚Äë45‚Äë67

¬ß12 Sign‚Äëoff
–î–æ–∫—É–º–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤: /docs/partner_agrostore.md
–ù–æ–≤—ã–µ –ø–∞—Ä—Ç–Ω—ë—Ä—ã ‚Äî –∫–æ–ø–∏—Ä—É–µ–º –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º.



