# Changelog

## [1.20.0] ‚Äî 2026-01-02

### Added
- feat: AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è Pro-–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ beta-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. Free-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç paywall —Å CTA ¬´–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Pro¬ª –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `/assistant`.
- feat: –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `db.hasAssistantAccess(userId)` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (Pro –∏–ª–∏ beta bypass).
- feat: —Å–æ–±—ã—Ç–∏–µ `assistant_paywall_shown` –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ Pro.
- docs: –æ–±–Ω–æ–≤–ª—ë–Ω SRS ¬ß4.6 —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–∞ –∫ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É.

## [Unreleased] ‚Äî 2025-11-13

### Added
- feat: –ø–ª–∞–Ω –ø–∞–º—è—Ç–∏ (draft ‚Üí proposed ‚Üí accepted ‚Üí scheduled) –∏ –∞–≤—Ç–æ–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ¬´–∑–µ–ª—ë–Ω—ã—Ö –æ–∫–æ–Ω¬ª (MVP).
- feat: –∫–∞—Ä—Ç–æ—á–∫–∞ –∞–≤—Ç–æ–ø–ª–∞–Ω–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ ¬´–ü—Ä–∏–Ω—è—Ç—å/–í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è/–û—Ç–º–µ–Ω–∏—Ç—å¬ª, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –≤–æ—Ä–∫–µ—Ä –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ—Ç–æ–≤.
- feat: –±—ã—Å—Ç—Ä—ã–π —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ (—Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º/–∑–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º/–≤—ã–±—Ä–∞—Ç—å –¥–∞—Ç—É) —Å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏, –µ—Å–ª–∏ –∞–≤—Ç–æ–ø–ª–∞–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.
- feat: `plan_sessions` —Ç–µ–ø–µ—Ä—å —Ñ–∏–∫—Å–∏—Ä—É—é—Ç —à–∞–≥–∏ –≤—Ä–µ–º–µ–Ω–∏ (fallback manual start, `time_scheduled`) –∏ –±–æ—Ç —É–º–µ–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É ¬´–®–∞–≥‚ÄØ3/3¬ª –ø–æ—Å–ª–µ –ø–∞—É–∑.
- feat: —Ä–∞–∑–¥–µ–ª ¬´üìã –ú–æ–∏ –ø–ª–∞–Ω—ã¬ª –¥–∞—ë—Ç –∫—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –±–ª–∏–∂–∞–π—à–∏—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫, –≤—ã–¥–µ–ª—è–µ—Ç –±–ª–æ–∫ ¬´–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ¬ª (—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∏ bulk-–¥–µ–π—Å—Ç–≤–∏—è–º–∏), –∞ –ø–µ—Ä–µ–Ω–æ—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏; –∫–æ–º–∞–Ω–¥—ã `/new`, `/plans`, `/objects` –∑–∞–∫—Ä–µ–ø–ª–µ–Ω—ã –≤ –º–µ–Ω—é Telegram –∏ –±–æ—Ç —à–ª—ë—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–∏ –ø—Ä–æ—Å—Ä–æ—á–µ–∫.
- feat: —Å–æ–±—ã—Ç–∏—è –≤–æ—Ä–æ–Ω–∫–∏ (`photo_received ‚Üí slot_confirmed`) + SQL-–æ—Ç—á—ë—Ç (`docs/LOGGING.md`) –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏.
- feat: –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π follow-up –±–µ–∑ –ø–æ–≤—Ç–æ—Ä—è—é—â–µ–π—Å—è –ø–µ—Ä–≤–æ–π —Ñ—Ä–∞–∑—ã + —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞.
- feat: –∞—É–¥–∏—Ç `assistant_proposals` (—Ç–∞–±–ª–∏—Ü–∞ + —Å—Ç–∞—Ç—É—Å) –∏ Prometheus-–º–µ—Ç—Ä–∏–∫–∏/–∞–ª–µ—Ä—Ç—ã –¥–ª—è error-rate –∂–∏–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞.
- feat: beta-—Ä–µ–∂–∏–º –∫–æ–º–Ω–∞—Ç–Ω—ã—Ö —Ä–∞—Å—Ç–µ–Ω–∏–π —Å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º, –º–∏–Ω–∏-–æ–ø—Ä–æ—Å–æ–º –∏ follow-up, –ø–ª—é—Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ beta-–º–µ—Ç—Ä–∏–∫/—Ñ–∏–¥–±–µ–∫–æ–≤.
- feat: –≤ /edit –¥–æ–±–∞–≤–ª–µ–Ω –±—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–∞—Å—Ç–µ–Ω–∏—è –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
- feat: –µ–¥–∏–Ω—ã–π —ç–∫—Ä–∞–Ω —Å–æ–≥–ª–∞—Å–∏–π (–ü–î–Ω + –û—Ñ–µ—Ä—Ç–∞), –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π UX –ø–æ–¥–ø–∏—Å–∫–∏ —Å –∞—É–¥–∏—Ç–æ–º consent meta.
- feat: –ø–ª–∞—Ç–µ–∂–∏ –ø–æ–ª—É—á–∏–ª–∏ idempotency key, —Ö—Ä–∞–Ω–µ–Ω–∏–µ payment/sbp URL –∏ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–≥–ª–∞—Å–∏–π.
- feat: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ¬´—Ç–æ –∂–µ —Ä–∞—Å—Ç–µ–Ω–∏–µ?¬ª —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–µ–π—Å—É –∏ –±–µ–∑ —Å–ø–∏—Å–∞–Ω–∏—è –ª–∏–º–∏—Ç–∞.
- feat: –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ paywall‚Äë–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (—Ç–∞–±–ª–∏—Ü–∞ + —à–µ–¥—É–ª–µ—Ä) –∏ –ª–∏–º–∏—Ç 1 –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è Free.
- feat: –∏—Å—Ç–æ—Ä–∏—è –≤ Free –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ —Ç–µ–∫—É—â–∏–º –∫–µ–π—Å–æ–º, Pro –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫.
- feat: Tinkoff Init –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É Receipt –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –§–§–î (–Ω–∞–ª–æ–≥–æ–≤—ã–π —Ä–µ–∂–∏–º osn –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
- docs: –æ–±–Ω–æ–≤–ª–µ–Ω—ã PRD/SRS, –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –∞–ª–≥–æ—Ä–∏—Ç–º –∞–≤—Ç–æ–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, UX-–ø–æ—Ç–æ–∫–∏, –ø—Ä–∞–≤–∏–ª–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
- docs: README –∏ UX flows –æ–ø–∏—Å—ã–≤–∞—é—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∞–≤—Ç–æ–ø–ª–∞–Ω–∞ (—É—Å–ø–µ—à–Ω—ã–π –∏ fallback-–ø—É—Ç—å ¬´–®–∞–≥‚ÄØ3/3¬ª) –∏ —Ä—É—á–Ω–æ–π –º–∞—Å—Ç–µ—Ä –≤—Ä–µ–º–µ–Ω–∏.

### Configuration
- `.env.example` –¥–æ–ø–æ–ª–Ω–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ `REMINDER_TICK_MS`, `REMINDER_DEFAULT_DELAY_H`, `AUTOPLAN_MIN_HOURS_AHEAD`, `WEATHER_PROVIDER`, `CATALOG_IMPORT_PATH`.
- –¥–æ–±–∞–≤–ª–µ–Ω `BOT_HANDLER_TIMEOUT_MS`, —á—Ç–æ–±—ã —É–ø—Ä–∞–≤–ª—è—Ç—å –ª–∏–º–∏—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ Telegraf (–∑–Ω–∞—á–µ–Ω–∏–µ `0`/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç —Ç–∞–π–º–∞—É—Ç).
- –¥–æ–±–∞–≤–ª–µ–Ω—ã `OBJECT_CHIPS_ROW_SIZE` –∏ `OBJECT_CHIPS_LIMIT` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å–∫–ª–∞–¥–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö —á–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤.
- –¥–æ–±–∞–≤–ª–µ–Ω—ã `BETA_HOUSEPLANTS_ENABLED`, `BETA_TESTER_IDS`, `BETA_FOLLOWUP_DAYS`, `BETA_FOLLOWUP_RETRY_DAYS` –¥–ª—è beta-—Ç–µ—Å—Ç–∞.
- –¥–æ–±–∞–≤–ª–µ–Ω—ã `SBP_TINKOFF_TAXATION`, `SBP_TINKOFF_RECEIPT_EMAIL`, `SBP_TINKOFF_RECEIPT_PHONE`, `SBP_TINKOFF_RECEIPT_ITEM_NAME`, `SBP_TINKOFF_RECEIPT` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ —á–µ–∫–∞ –≤ Tinkoff Init.

### Fixed
- fix: –¥–æ–±–∞–≤–ª–µ–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ `users.tg_id`, —á—Ç–æ–±—ã `ON CONFLICT (tg_id)` –≤ bot API –Ω–µ –ø–∞–¥–∞–ª –≤ –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö –±–µ–∑ –∏–Ω–¥–µ–∫—Å–∞.
- fix: Alembic —Ç–µ–ø–µ—Ä—å –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç core-—Ç–∞–±–ª–∏—Ü—ã (`objects`, `cases`, `plan_stages`, `reminders`, `autoplan_runs` –∏ —Ç.–¥.) —á–µ—Ä–µ–∑ –æ–±—â–∏–π SQL-—Å–∫—Ä–∏–ø—Ç, —Ç–∞–∫ —á—Ç–æ –±–æ—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ `relation ... does not exist`.
- fix: bot –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –æ–±—Ä—ã–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–æ—Ç–æ –Ω–∞ 90‚Äë–π —Å–µ–∫—É–Ω–¥–µ ‚Äî —Ç–∞–π–º–∞—É—Ç Telegraf —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `BOT_HANDLER_TIMEOUT_MS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 180‚ÄØ000‚ÄØ–º—Å).
- fix(security): per-user API keys + –ø–æ–¥–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤ —Å `X-Req-*` –∏ –∑–∞—â–∏—Ç–æ–π –æ—Ç replay —á–µ—Ä–µ–∑ Redis.
- fix: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∂–∏–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –≤ –±–æ—Ç–µ (chat + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ API).
- fix: –±–æ—Ç —Ç—Ä–∞–∫—Ç—É–µ—Ç `bank_error` –∫–∞–∫ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞ –∏ —Å–æ–æ–±—â–∞–µ—Ç –æ–± –æ—à–∏–±–∫–µ —Å—Ä–∞–∑—É.
- fix: –≤–æ–∑–≤—Ä–∞—Ç/–æ—Ç–º–µ–Ω–∞ –ø–æ—Å–ª–µ `success` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –ø–æ–¥–ø–∏—Å–∫—É.
